<script>
        function aggiungiDati() {
            //prende i valori inseriti nel form
            const indirizzo = document.getElementById("indirizzo").value.trim();
            const codiceCatastale = document.getElementById("codice-catastale").value.trim();
            const tipoEdificio = document.getElementById("tipo-edificio").value.trim();
            const dataPredisposizione = document.getElementById("data-predisposizione").value.trim();

            // check campi obbligatori + alert
            if (!indirizzo || !codiceCatastale || !tipoEdificio || !dataPredisposizione) {
                alert("Per favore, compila tutti i campi del modulo.");
                return;
            }
            
            

            // seleziona la tabella
            const tbody = document.getElementById("dati_registrati");

            // crea la riga mancante
            const nuovaRiga = document.createElement("tr");

            // aggiunge le celle inserite nel form
            nuovaRiga.innerHTML = `
                <td>${indirizzo}</td>
                <td>${codiceCatastale}</td>
                <td>${tipoEdificio}</td>
                <td>${dataPredisposizione}</td>
                <td><button class="btn btn-danger btn-sm" onclick="eliminaRiga(this)">Elimina</button></td>
            `;

            // aggiunge la riga al corpo
            tbody.appendChild(nuovaRiga);

            
            // reset dopo l'invio
            document.getElementById("registrazione-edificio").reset();

    async function aggiungiDati() {
    // prendi i valori dalla pagina web
    const indirizzo = document.getElementById("indirizzo").value.trim();
    const codiceCatastale = document.getElementById("codice-catastale").value.trim();
    const tipoEdificio = document.getElementById("tipo-edificio").value.trim();
    const dataPredisposizione = document.getElementById("data-predisposizione").value.trim();

    // Verifica ogni campo
    if (!indirizzo || !codiceCatastale || !tipoEdificio || !dataPredisposizione) {
        alert("Per favore, compila tutti i campi del modulo.");
        return;
    }

    // crea oggetto javascript per mandarlo al backend flask
    const formData = {
        indirizzo,
        codiceCatastale,
        tipoEdificio,
        dataPredisposizione
    };
        //POST REQUEST
        try {
            // Mandare il oggetto a flask(invece di "api/registrazione_edificio" metti route giusta)
            const response = await fetch('/api/registrazione_edificio', {
                method: 'POST',  
                headers: {
                    'Content-Type': 'application/json' 
                },
                body: JSON.stringify(formData) 
            });

            if (response.ok) {
                const data = await response.json();
                console.log("Success:", data);
                alert("Edificio registrato con successo!");
            } else {
                console.error("Error:", response.statusText);
                alert("Errore durante la registrazione dell'edificio.");
            }
        } catch (error) {
            console.error('Network error:', error);
            alert('Si Ã¨ verificato un errore di rete.');
        }
        //POST REQUEST
    }
        }

        function eliminaRiga(pulsante) {
            const riga = pulsante.parentNode.parentNode;
            riga.remove();
        }
    </script>
</body>
</html>